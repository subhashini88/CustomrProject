/*
  This class has been generated by the Code Generator
*/

package com.cica.uw;

import com.cordys.cpc.bsf.busobject.BusObjectConfig;
import com.cordys.cpc.bsf.busobject.BusObjectIterator;
import com.cordys.cpc.bsf.busobject.QueryObject;


public class tbl_underwriting_worksheet extends tbl_underwriting_worksheetBase
{
    public tbl_underwriting_worksheet()
    {
        this((BusObjectConfig)null);
    }

    public tbl_underwriting_worksheet(BusObjectConfig config)
    {
        super(config);
    }

    public static BusObjectIterator<com.cica.uw.tbl_underwriting_worksheet> getWorksheetCheckForCaseID(String caseID, String taskID, String policyNumber, com.cordys.cpc.bsf.query.Cursor cursor)
    {
              QueryObject query;
		if ((caseID.isEmpty()) & (taskID.isEmpty()) & (policyNumber != null))  // input only policy number 
		{	String queryText="select * FROM tbl_underwriting_worksheet where policy_number= :policyNumber order by obj_id asc";
			query=new QueryObject(queryText);
			query.addParameter("policyNumber", "tbl_underwriting_worksheet.policy_number",QueryObject.PARAM_STRING, policyNumber);

                }
		else if ((taskID.isEmpty()) & (policyNumber != null) & (caseID != null)) // input policy and Case ID
		{	String queryText="select * FROM tbl_underwriting_worksheet where policy_number= :policyNumber and case_id = :caseID order by obj_id asc";
			query=new QueryObject(queryText);
			query.addParameter("policyNumber", "tbl_underwriting_worksheet.policy_number",QueryObject.PARAM_STRING, policyNumber);
			query.addParameter("caseID", "tbl_underwriting_worksheet.case_id",QueryObject.PARAM_STRING, caseID);
		}
		else if ((taskID != null) & (policyNumber != null) & (caseID.isEmpty())) // input policy and task ID
		{	String queryText="select * FROM tbl_underwriting_worksheet where policy_number= :policyNumber and task_id = :taskID order by obj_id asc";
			query=new QueryObject(queryText);
			query.addParameter("policyNumber", "tbl_underwriting_worksheet.policy_number",QueryObject.PARAM_STRING, policyNumber);
			query.addParameter("taskID", "tbl_underwriting_worksheet.task_id",QueryObject.PARAM_STRING, taskID);
		}
		else
		{
			String queryText="select * FROM tbl_underwriting_worksheet where policy_number= :policyNumber and case_id = :caseID and task_id = :taskID order by obj_id asc";
			query=new QueryObject(queryText);
			query.addParameter("policyNumber", "tbl_underwriting_worksheet.policy_number",QueryObject.PARAM_STRING, policyNumber);
			query.addParameter("caseID", "tbl_underwriting_worksheet.case_id",QueryObject.PARAM_STRING, caseID);
			query.addParameter("taskID", "tbl_underwriting_worksheet.task_id",QueryObject.PARAM_STRING, taskID);
		}
		query.setResultClass(tbl_underwriting_worksheet.class);
        query.setCursor(cursor);
        return query.getObjects();

    }
	
	public static com.cica.uw.tbl_underwriting_worksheet getDecisionedByCase(String policyNumber)
    {
        String queryText = "select top 1 * from tbl_underwriting_worksheet where policy_number=:policyNumber and interaction_type in ('Decision Submitted','Auto Note - Case Closed') order by obj_id desc";
        QueryObject query = new QueryObject(queryText);
		query.addParameter("policyNumber", "tbl_underwriting_worksheet.policy_number", QueryObject.PARAM_STRING, policyNumber);//
        query.setResultClass(tbl_underwriting_worksheet.class);
        return (tbl_underwriting_worksheet)query.getObject();
    }

}
