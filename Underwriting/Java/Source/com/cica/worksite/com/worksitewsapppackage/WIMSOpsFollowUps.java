/*
  This class has been generated by the Code Generator
*/

package com.worksitewsapppackage;

import com.cordys.cpc.bsf.busobject.BusObjectConfig;
import com.cordys.cpc.bsf.busobject.BusObjectIterator;
import com.cordys.cpc.bsf.busobject.QueryObject;
import java.util.*;
import com.cordys.cpc.bsf.busobject.BSF;

public class WIMSOpsFollowUps extends WIMSOpsFollowUpsBase
{
    public WIMSOpsFollowUps()
    {
        this((BusObjectConfig)null);
    }

    public WIMSOpsFollowUps(BusObjectConfig config)
    {
        super(config);
    }

    public static BusObjectIterator<com.worksitewsapppackage.WIMSOpsFollowUps> GetFollowUpByMasterAppNo(String MasterAppNO, String ScreenName)
    {
       String queryText = "select * from WIMSOpsFollowUps where MasterAppID= :MasterAppNO and Status <> 'Complete' and TaskName= :ScreenName";
        QueryObject query = new QueryObject(queryText);
        query.addParameter("MasterAppNO", "WKSUWCase.MasterAppID", QueryObject.PARAM_STRING, MasterAppNO);
        query.addParameter("ScreenName", "WKSUWCase.TaskName", QueryObject.PARAM_STRING, ScreenName);
        return query.getObjects();
    }
   public static BusObjectIterator<com.worksitewsapppackage.WIMSOpsFollowUps> GetFollowUpByPolicyNoandTaskID(String PolicyNo, String TaskID,String ScreenName)
    {
       String queryText = "select top 1 * from WIMSOpsFollowUps where MasterAppID= :PolicyNo and Status <> 'Complete' and TaskName= :ScreenName and TaskInstanceID = :TaskID order by SlNO desc ";
        QueryObject query = new QueryObject(queryText);
        query.addParameter("PolicyNo", "WKSUWCase.MasterAppID", QueryObject.PARAM_STRING, PolicyNo);
        query.addParameter("ScreenName", "WKSUWCase.TaskName", QueryObject.PARAM_STRING, ScreenName);
 query.addParameter("TaskID", "WKSUWCase.TaskInstanceID", QueryObject.PARAM_STRING, TaskID);
        return query.getObjects();
    }
protected void onBeforeInsert()
{
String userDN = BSF.getUser();
this.setCreatedOn(new Date(new Date().getTime() - (new Date().getTimezoneOffset() * 60 * 1000)));
this.setCreatedBy(userDN.substring(3,userDN.indexOf(",")));
}
protected void onBeforeUpdate()
{
String userDN = BSF.getUser();
this.setUpdatedOn(new Date(new Date().getTime() - (new Date().getTimezoneOffset() * 60 * 1000)));
this.setUpdatedBy(userDN.substring(3,userDN.indexOf(",")));
}
}
